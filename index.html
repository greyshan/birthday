<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Launching Soon</title>

  <style>
    html,body {height:100%;margin:0;padding:0;}
    body {
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      background:#0b0b0f;
      color:#fff;
      font-family:Inter,Segoe UI,Arial,sans-serif;
      text-align:center;
      padding:20px;
    }
    h1 {font-size:28px;margin:0 0 12px;}
    #countdown {font-size:36px;letter-spacing:1px;}
    .sub {opacity:.85;margin-top:12px;}
    #preloadStatus {font-size:13px;color:#ddd;margin-top:12px;opacity:.9;}
    #content {display:none;width:100%;height:100%;}
  </style>

  <!-- Preload some assets -->
  <link rel="preload" href="riddhi 1.png" as="image">
  <link rel="preload" href="riddhi 3.jpg" as="image">
  <link rel="preload" href="riddhi 4.jpg" as="image">
  <link rel="preload" href="riddhi 5.jpg" as="image">
  <link rel="preload" href="riddhi 6.png" as="image">
  <link rel="preload" href="riddhi 7.jpg" as="image">
  <link rel="preload" href="riddhi 8.jpg" as="image">
  <link rel="preload" href="riddhi 11.png" as="image">
  <link rel="preload" href="riddhi 12.png" as="image">
  <link rel="preload" href="riddhi 13.png" as="image">
  <link rel="preload" href="riddhi 14.png" as="image">
  <link rel="preload" href="new_bg_music.mp3" as="audio">
  <link rel="preload" href="new_giftbox_music.mp3" as="audio">
  <link rel="preload" href="happybirthday.mp3" as="audio">
  <link rel="preload" href="main.html" as="document">
</head>
<body>
  <div id="countWrap">
    <h1>Maarenge chaku, niklega Khoon! RIDDHI ka birthday coming soon !</h1>
    <div id="countdown">Loadingâ€¦</div>
    <div class="sub">is left before chhota don turns 18</div>
    <div id="preloadStatus">chota don turning 18 in </div>
  </div>

  <div id="content" aria-hidden="true"></div>

  <script>
    // ---------- CONFIG ----------
    const TARGET = new Date("2025-09-21T00:00:00+05:30").getTime();
    const MAIN_HTML = "main.html";
    const MAIN_CSS  = "styles.css";
    const MAIN_JS   = "app.js";

    // ðŸ‘‰ If after launch, skip countdown entirely
    if (Date.now() >= TARGET) {
      location.replace(MAIN_HTML);
    }

    const elCountdown = document.getElementById("countdown");
    const elPreload   = document.getElementById("preloadStatus");
    const elContent   = document.getElementById("content");

    // ---------- COUNTDOWN ----------
    function updateCountdown() {
      const now = Date.now();
      const diff = TARGET - now;
      if (diff <= 0) {
        revealSite();
        return;
      }
      const d = Math.floor(diff / (1000*60*60*24));
      const h = Math.floor((diff/(1000*60*60)) % 24);
      const m = Math.floor((diff/(1000*60)) % 60);
      const s = Math.floor((diff/1000) % 60);
      elCountdown.textContent = `${d}d ${h}h ${m}m ${s}s`;
    }
    updateCountdown();
    const timer = setInterval(updateCountdown, 1000);

    // ---------- PRELOAD ----------
    const preloadList = [
     "riddhi 1.png","riddhi 3.jpg","riddhi 4.jpg","riddhi 5.jpg","riddhi 6.png","riddhi 7.jpg","riddhi 8.jpg","riddhi 11.png","riddhi 12.png","riddhi 13.png","riddhi 14.png",
      "new_giftbox_music.mp3","new_bg_music.mp3","happybirthday.mp3",
    ];
    (async function preloadAssets(){
      const imgs = preloadList.filter(p => p.match(/\.(jpg|jpeg|png|gif)$/i));
      const audios = preloadList.filter(p => p.match(/\.(mp3|wav|ogg)$/i));
      await Promise.all(imgs.map(src => new Promise(res=>{
        const img = new Image();
        img.onload = res; img.onerror = res;
        img.src = src;
      })));
      await Promise.all(audios.map(src => fetch(src).catch(()=>{})));
      elPreload.textContent = "party begins at midnight!";
    })();

    // ---------- REVEAL ----------
    async function revealSite() {
      clearInterval(timer);
      elCountdown.textContent = "Revealingâ€¦";
      elPreload.textContent = "Loading siteâ€¦";

      try {
        const resp = await fetch(MAIN_HTML);
        if (!resp.ok) throw new Error(`Failed to fetch ${MAIN_HTML}`);
        const html = await resp.text();

        const parser = new DOMParser();
        const doc = parser.parseFromString(html, "text/html");
        const bodyHtml = doc.body.innerHTML;

        elContent.innerHTML = bodyHtml;

        // Inject CSS
        const link = document.createElement("link");
        link.rel = "stylesheet";
        link.href = MAIN_CSS;
        document.head.appendChild(link);

        // Hide countdown, show content
        document.getElementById("countWrap").style.display = "none";
        elContent.style.display = "block";
        elContent.removeAttribute("aria-hidden");

        // Inject JS for main site
        const script = document.createElement("script");
        script.src = MAIN_JS;
        document.body.appendChild(script);

        elPreload.textContent = "Site loaded.";
      } catch (err) {
        console.error(err);
        elPreload.textContent = "Error loading site. See console.";
      }
    }
  </script>
</body>
</html>
